---
title: "Dimensionality reduction techniques"
author: Matthias Döring
date: '2018-11-13T15:00:00Z'
description: "TODO"
draft: true
categories:
  - machine-learning
tags:
    - dimensionality reduction
thumbnail: "/post/machine-learning/linear_models_cover.png"

---



<p>Dimensionality reduction has two primary use cases: data exploration and machine learning. It is useful for data exploration because dimensionality reduction to few dimensions (e.g. 2 or 3 dimensions) allows for visualizing the samples. Such a visualization can then be used to obtain insights from the data (e.g. detect clusters and identify outliers). For machine learning, dimensionality reduction is relevant when there are many features, particularly when there are more features than samples. By reducing the size of the feature space, it is possible to obtain models that generalize better since the signal-to-noise ratio is improved.</p>
<div id="loading-a-whiskey-data-set" class="section level2">
<h2>Loading a whiskey data set</h2>
<p>I have previously used a data set describing the characteristics of whiskeys to <a href="/post/data-visualization/radar-plot/">draw radar plots</a>. Here, we will the whiskey data set to identify how different dimensionality reduction techniques perform on this data set.</p>
<pre class="r"><code>library(RCurl)
# load data as character
f &lt;- getURL(&#39;https://www.datascienceblog.net/data-sets/whiskies.txt&#39;)
# read table from text connection
df &lt;- read.csv(textConnection(f), header=T)
head(df)</code></pre>
<pre><code>##   RowID  Distillery Body Sweetness Smoky Medicinal Tobacco Honey Spicy
## 1     1   Aberfeldy    2         2     2         0       0     2     1
## 2     2    Aberlour    3         3     1         0       0     4     3
## 3     3      AnCnoc    1         3     2         0       0     2     0
## 4     4      Ardbeg    4         1     4         4       0     0     2
## 5     5     Ardmore    2         2     2         0       0     1     1
## 6     6 ArranIsleOf    2         3     1         1       0     1     1
##   Winey Nutty Malty Fruity Floral    Postcode Latitude Longitude
## 1     2     2     2      2      2  \tPH15 2EB   286580    749680
## 2     2     2     3      3      2  \tAB38 9PJ   326340    842570
## 3     0     2     2      3      2   \tAB5 5LI   352960    839320
## 4     0     1     2      1      0  \tPA42 7EB   141560    646220
## 5     1     2     3      1      1  \tAB54 4NH   355350    829140
## 6     1     0     1      1      2    KA27 8HJ   194050    649950</code></pre>
<pre class="r"><code>df$Postcode &lt;- gsub(&quot; *\t*&quot;, &quot;&quot;, df$Postcode)
# select characterics of the whiskeys
features &lt;- c(&quot;Body&quot;, &quot;Sweetness&quot;, &quot;Smoky&quot;,
            &quot;Medicinal&quot;, &quot;Tobacco&quot;, &quot;Honey&quot;,
            &quot;Spicy&quot;, &quot;Winey&quot;, &quot;Nutty&quot;,
            &quot;Malty&quot;, &quot;Fruity&quot;, &quot;Floral&quot;)
feat.df &lt;- df[, c(&quot;Distillery&quot;, features)]</code></pre>
</div>
<div id="assumptions-about-the-results" class="section level2">
<h2>Assumptions about the results</h2>
<p>Before we begin reducing the dimensionality of the data, we should think about what kind of results we would like to obtain. For the whiskey data, we would like that whiskeys with similar properties are close to each other in the reduced space.</p>
<p>Distilleries that are in proximity to one another should produce whiskeys that exhibit some similaries. Thus, clustering the data by <code>Latitude</code> and <code>Longitude</code> should give us an idea of how the results of a reasonable dimnsionality reduction should look like. The scotch whiskey regions are the following:</p>
<div class="figure">
<img src="https://upload.wikimedia.org/wikipedia/commons/f/fd/Scotch_regions.svg" alt="Scotch regions (Licensed under CC BY-SA 3.0 and retrieved from https://commons.wikimedia.org/wiki/File:Scotch_regions.svg)" />
<p class="caption">Scotch regions (Licensed under CC BY-SA 3.0 and retrieved from <a href="https://commons.wikimedia.org/wiki/File:Scotch_regions.svg" class="uri">https://commons.wikimedia.org/wiki/File:Scotch_regions.svg</a>)</p>
</div>
<p>Note: some regions are much larger than other. For example, Highlands and Lowlands are quite large, while the islands are small. Thus, the variance of the coordinates will be higher or lower for these two regions, respectively.</p>
</div>
<div id="geographical-locations-of-the-distilleries" class="section level2">
<h2>Geographical locations of the distilleries</h2>
<p>Let us see where the distilleries are located by plotting their latitude and longitude coordinates:</p>
<pre class="r"><code>library(ggmap)</code></pre>
<pre><code>## Loading required package: ggplot2</code></pre>
<pre class="r"><code># transform UTM coordinates to longitude/latitude in degrees
geo.df &lt;- df[, c(&quot;Latitude&quot;, &quot;Longitude&quot;)]
# REF: https://rstudio-pubs-static.s3.amazonaws.com/375481_d2605e8726364d30a5b20c6974710cf5.html
# create &#39;SpatialPoints&#39; object
library(raster)</code></pre>
<pre><code>## Loading required package: sp</code></pre>
<pre class="r"><code>coordinates(geo.df) &lt;-  ~Latitude + Longitude
# add coordinate reference system (CRS) for UK
proj4string(geo.df) &lt;- CRS(&quot;+init=epsg:27700&quot;)
# transform again:
if (FALSE) {
library(rgdal) # need to install libgdal-dev; TODO: NOTEBOOK upgrade!
geo.df &lt;- spTransform(geo.df, CRS(&quot;+init=epsg:4326&quot;))
map &lt;- get_map(location = c(lon = 749680, lat = 286580)) # doesn&#39;t work
map.df &lt;- data.frame(df[, &quot;Distillery&quot;], geo.df)
###########
# VISUALIZE
library(maps)
world.map &lt;- map_data (&quot;world&quot;)
UK.map &lt;- world.map %&gt;% filter(region == &quot;UK&quot;)
UK.map %&gt;%
  filter(subregion == &quot;Scotland&quot;) %&gt;% 
  ggplot() + 
  geom_map(map = UK.map, 
           aes(x = long, y = lat, map_id = region),
           fill=&quot;white&quot;, colour = &quot;black&quot;) + 
  coord_map() + 
  geom_point(data = map.df, 
             aes(x=lat, y = long, colour = &quot;red&quot;, alpha = .9))
}</code></pre>
</div>
<div id="clustering-distilleries-by-location" class="section level2">
<h2>Clustering distilleries by location</h2>
<p>Since we know that the data set represents Islay, Island (Jura, Isle of Skye, Orkney), Isle of Skye, the Highlands, the Lowlands, as well as Speyside, we will use <span class="math inline">\(K\)</span>-means with <span class="math inline">\(K = 6\)</span>. Note that Island whiskeys will not cluster well because the locations of these distilleries are all over the place.</p>
<pre class="r"><code>K &lt;- 6
C &lt;- kmeans(df[, c(&quot;Longitude&quot;, &quot;Latitude&quot;)], K)
df &lt;- cbind(df, &quot;Cluster&quot; = as.factor(C$cluster))
library(ggplot2)
ggplot(df, aes(x = Latitude, y = Longitude)) +
    geom_point(aes(color = Cluster))</code></pre>
<p><img src="/post/machine-learning/dimensionality-reduction_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
